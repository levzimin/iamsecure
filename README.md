## IAMSecure 

This repository contains a simple solution for the AWS IAM Security Assessment tasks.

### Task 1 — Basic AWS CLI Query

- Simplu ran the AWS CLI to list all IAM users and wrote the output to `outputs/task1-list-users.json`.
- Result file: `outputs/task1-list-users.json`
- To run this again use the command below with your credentials (make sure you have awscli installed and the output folder created)

#### Command used

```bash
AWS_ACCESS_KEY_ID=<access key here> \
AWS_SECRET_ACCESS_KEY=<secret key here> \
aws iam list-users --output json > outputs/task1-list-users.json
```

---

### Task 2 — Security Checkers


### Notes for Production and Scalability

- This runs as a stateless, and I/O-bound, HTTP service. Each request builds AWS SDK clients, runs the checks, and returns JSON. No shared in‑memory state across requests.
- Scaling: in order to horizontally scale this we would run multiple pods behind a load balancer; any pod can take any request.
- Credentials: in prod it's likey going to be better to avoid using long lived access keys in env var. Instead, we'd use workload identity (Kubernetes ServiceAccount + IRSA) so pods assume roles without long‑lived secrets.
- Extensibility: hardcoded instantiation is fine for this exercise and size of this project. If/when it grows, we can add a small manifest/registry that maps stable check IDs to factories and per‑checker config. Whether or not we should load code at run time is a full discussion and I'd default to no unless there's strong need for that.
- In pracice we'd also save the reports in a database and allow getting their results later on. Once we do that, the POST /report endpoint would return a report id right away, instead of having the endpoint 'block' the request. Then a GET /report/:uuid would allow checking up on it's progress. (we'd likely introduce a progress status or something simlar for this too)
- Optimizations: when adding more checkers, we might consider sharing commonly pulled data between them like user-lists etc



### How to Run

Option 1 — Node (local):

```bash
npm i
# provide creds via AWS_PROFILE or env vars, then:
npm start

# Request supported checks
curl -s http://localhost:8000/report/supported-checks

# Run a report
curl -s -X POST http://localhost:8000/report \
  -H 'content-type: application/json' \
  -d '{ "checks": ["MFA", "StaleAccessKeys"] }'
```

Option 2 — Docker:

```bash
docker build -t iamsecure .
docker run --rm -p 8000:8000 --env-file .env iamsecure
# or pass envs explicitly:
# docker run --rm -p 8000:8000 -e AWS_PROFILE=sandbox -e AWS_REGION=us-east-1 iamsecure
```

Unit tests:

```bash
npm i
npm test
```


### Additional Files

To avoid sharing sensitive information, the file generated by me for Task 1 and a report generated for Task 2 will be shared in a different channel.